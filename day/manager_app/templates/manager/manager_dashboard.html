{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Add Event</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link rel="icon" href="{% static 'image/YIIMG.png' %}" type="image/x-icon" />

  <style>
    .tag-container {
        border: 1px solid #ccc;


        min-height: 40px;
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        cursor: text;
    }
    .tag {
        display: flex;
        align-items: center;
        background-color: #3498DB;
        color: white;

        padding: 5px 10px;
        margin: 3px;
        border-radius: 5px;
        font-size: 14px;
    }
    .tag .remove {
        cursor: pointer;
        margin-left: 8px;
        font-weight: bold;
    }
    .tag-input {
        border: none;
        outline: none;
        flex: 1;
        padding: 5px;
        font-size: 14px;
    }
  </style>

  <!-- Google Fonts -->
  <link href="https://fonts.gstatic.com" rel="preconnect">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="{% static 'assets/vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="{% static 'assets/css/style.css' %}" rel="stylesheet">
  <link href="{% static 'css/eventdata.css' %}" rel="stylesheet">
</head>

<body>

  {% include 'components/header.html' %}
  {% include 'components/side_navbar.html' %}

  <main id="main" class="main">

    <div class="pagetitle">
      <h1>Add Event Data</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="">Home</a></li>
          <li class="breadcrumb-item">Manager</li>
          <li class="breadcrumb-item active">Add Event Data</li>
        </ol>
      </nav>
    </div>

    <div class="container">
      <!-- Signup Form -->
      <div class="card shadow-lg">
        <div class="card-header text-center">
          <strong>Add Event Data</strong>
        </div>
        <br>
        <div class="card-body">
          <form method="POST" action="{% url 'event_data' %}" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="row">

              <div class="col-12 col-sm-6 col-md-6">
                <div class="form-group">
                  <label for="your_name">Your Name</label>
                  <input type="text" id="your_name" class="form-control" name="your_name" value="{{ user.first_name }} {{ user.last_name }}" required placeholder="Enter your full name" aria-label="Your Name">
                </div>
              </div>

              <div class="col-12 col-sm-6 col-md-6">
                <div class="form-group">
                  <label for="event_date">Event Date</label>
                  <input type="date" id="event_date" class="form-control" name="event_date" required aria-label="Event Date">
                </div>
              </div>

              <div class="col-12 col-sm-6 col-md-6">
                <div class="form-group">
                  <label for="event_name">Event Name</label>
                  <input type="text" id="event_name" class="form-control" name="event_name" required aria-label="Event Name">
                </div>
              </div>

              <div class="col-12 col-sm-6 col-md-6">
                <div class="form-group">
                  <label for="event_venue">Event Venue</label>
                  <input type="text" id="event_venue" class="form-control" name="event_venue" required aria-label="Event Venue">
                </div>
              </div>

              <div class="col-12 col-sm-6 col-md-6">
                <div class="form-group">
                  <label for="role_yi">YI Role</label>
                  <select class="form-control" id="role_yi" name="role_yi" required aria-label="YI Role">
                    <option value="" disabled selected>Choose YI Role</option>
                    <option value="Vertical Chair">Vertical Chair</option>
                    <option value="Vertical Co-Chair">Vertical Co-Chair</option>
                    <option value="Team Member">Team Member</option>
                  </select>
                </div>
              </div>

           <div class="col-12 col-sm-6 col-md-6">
    <label>Handler name(s)</label>
    <div class="tag-container" id="tagContainer">
        <input type="text" id="tagInput" class="form-control" placeholder="Type and press Enter (e.g., John, Mike)" aria-label="Tag Input">
        <input type="hidden" id="hiddenInput" name="handel_by">
    </div>
</div>


              <div class="col-12 col-sm-6 col-md-6">
                <div class="form-group">
                  <label for="project_verticals">Project Verticals</label>
                  <select class="form-control" id="project_verticals" name="project_verticals" required aria-label="Project Verticals">
                    <option value="" disabled selected>Choose Project/Initiative</option>
                    <option value="Masoom">Masoom</option>
                    <option value="Road Safety">Road Safety</option>
                    <option value="Health">Health</option>
                    <option value="Sport">Sports</option>
                    <option value="Accessibility">Accessibility</option>
                    <option value="Learning(YI Talks)">Learning(YI Talks)</option>
                    <option value="Climate action">Climate action</option>
                    <option value="Innovation">Innovation</option>
                    <option value="Entrepreneurship">Entrepreneurship</option>
                    <option value="Branding & PR">Branding & PR</option>
                    <option value="Special Interest Group (S.I.G)">Special Interest Group (S.I.G)</option>
                    <option value="Women Engagement (YIWE)">Women Engagement (YIWE)</option>
                    <option value="Culture Connect">Culture Connect</option>
                    <option value="Yi Angel">Yi Angel</option>
                    <option value="Membership Engagement">Membership Engagement</option>
                    <option value="Other">Other</option>
                  </select>
                </div>
              </div>

              <div class="col-12 col-sm-6 col-md-6">
                <div class="form-group">
                  <label for="project_stakeholder">Project Stakeholder</label>
                  <select class="form-control" id="project_stakeholder" name="project_stakeholder" required aria-label="Project Stakeholder">
                    <option value="" disabled selected>Choose Project Stakeholder</option>
                    <option value="Yuva">Yuva</option>
                    <option value="Thalir">Thalir</option>
                    <option value="Rural Initiatives">Rural Initiatives</option>
                    <option value="General Public">General Public</option>
                    <option value="Associate Partner">Associate Partner</option>
                  </select>
                </div>
              </div>

              <div class="col-12 col-sm-6 col-md-6">
                <div class="form-group">
                  <label for="yi_pillar">YI Pillar Impact</label>
                  <select class="form-control" id="yi_pillar" name="yi_pillar" required aria-label="YI Pillar Impact">
                    <option value="" disabled selected>Choose YI Pillar Impact</option>
                    <option value="Youth Leader">Youth Leader</option>
                    <option value="Thought Leader">Thought Leader</option>
                    <option value="Nation Building">Nation Building</option>
                  </select>
                </div>
              </div>

              <div class="col-12 col-sm-6 col-md-6">
                <div class="form-group">
                  <label for="social_link">Social Link</label>
                  <input type="url" id="social_link" class="form-control" name="social_link" required placeholder="Enter your social media link" aria-label="Social Link">
                </div>
              </div>

              <div class="col-12 col-sm-6 col-md-6">
                <div class="form-group">
                  <label for="total_impact">Total Impact</label>
                  <input type="number" id="total_impact" class="form-control" name="total_impact" required placeholder="Enter total impact" aria-label="Total Impact">
                </div>
              </div>

              <div class="col-12 col-sm-6 col-md-6">
                <div class="form-group">
                  <label for="event_expense">Event Expense</label>
                  <input type="number" id="event_expense" class="form-control" name="event_expense" required placeholder="Event Expense" aria-label="Event Expense">
                </div>
              </div>

              <div class="col-12 col-sm-6 col-md-6">
                <div class="form-group">
                  <label for="event_img">Event Image</label>
                  <input type="file" id="event_img" class="form-control" name="event_img" accept=".jpg, .jpeg, .png" multiple aria-label="Event Image">
                </div>
              </div>

              <div class="col-12 col-sm-6 col-md-6" id="sig_div" style="display: none;">
                <div class="form-group">
                  <label for="sig_">Choose SIG</label>
                  <select class="form-control" name="sig_">
                    <option value="" disabled selected>Choose Special Interest Group</option>
                    <option value="Active Living">Active Living</option>
                    <option value="Photography">Photography</option>
                    <option value="Trekking">Trekking</option>
                    <option value="Entrepreneurship">Entrepreneurship</option>
                    <option value="Community">Community</option>
                  </select>
                </div>
              </div>

              <div class="col-12 col-sm-6 col-md-6" id="associate_div" style="display: none;">
                <div class="form-group">
                  <label for="associate_partners">Associate Partner</label>
                  <select class="form-control" id="associate_partners" name="associate_partner">
                    <option value="" disabled selected>Choose Associate </option>
                    <option value="Big Bull">Big Bull</option>
                    <option value="EB">EB</option>
                    <option value="Yuvi">Yuvi</option>
                  </select>
                </div>
              </div>

              <div class="col-12 col-sm-6 col-md-6" id="school_div" style="display:none;">
                <div class="form-group">
                  <label for="school">School</label>
                  <input type="text" id="school" class="form-control" name="school" placeholder="School" aria-label="School">
                </div>
              </div>

              <div class="col-12 col-sm-6 col-md-6" id="collage_div" style="display:none;">
                <div class="form-group">
                  <label for="collage">Collage</label>
                  <input type="text" id="collage" class="form-control" name="collage" placeholder="Collage" aria-label="Collage">
                </div>
              </div>
            </div>
            <button type="submit" class="btn btn-primary btn-block mt-4">Submit</button>
            <button type="reset" class="btn btn-primary btn-block mt-4">Reset</button>
          </form>
        </div>
      </div>
    </div>

  </main>

  <!-- Vendor JS Files -->
  <script src="{% static 'assets/vendor/apexcharts/apexcharts.min.js' %}"></script>
  <script src="{% static 'assets/vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>

  <!-- Template Main JS File -->
  <script src="{% static 'assets/js/main.js' %}"></script>

  <script src="{% static 'assets/js/event.js' %}"></script>

  <script>
    const container = document.getElementById('tagContainer');
const input = document.getElementById('tagInput');
const hiddenInput = document.getElementById('hiddenInput');
container.addEventListener('click', () => input.focus());

input.addEventListener('keydown', function(event) {
    if (event.key === 'Enter' || event.key === ',') {
        event.preventDefault();
        let value = input.value.trim().replace(/,$/, "");
        if (value !== '') {
            if (document.querySelectorAll('.tag').length < 5) {  // Limit to 5 tags
                addTag(value);
                input.value = '';
            } else {
                alert('You can only add up to 5 handler names.');
            }
        }
    }
});

function addTag(text) {
    const tag = document.createElement('span');
    tag.classList.add('tag');
    tag.innerHTML = `${text} <span class="remove" onclick="removeTag(this)">×</span>`;
    container.insertBefore(tag, input);
    updateHiddenInput();
}

function removeTag(element) {
    element.parentElement.remove();
    updateHiddenInput();
}

function updateHiddenInput() {
    const tags = document.querySelectorAll('.tag');
    hiddenInput.value = Array.from(tags).map(tag => tag.textContent.replace(' ×', '')).join(',');
}

  </script>

</body>

</html>
